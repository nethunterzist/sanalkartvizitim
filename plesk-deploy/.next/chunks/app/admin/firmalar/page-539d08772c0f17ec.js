(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{2832:function(e,t,a){Promise.resolve().then(a.bind(a,8454))},8454:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(2265),i=a(7648),n=a(9376);function l(){(0,n.useRouter)();const[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(""),[u,g]=(0,s.useState)(1);(0,s.useEffect)((()=>{console.log("Durum de\u011fi\u015fimi - loading:",o,"firmalar:",e.length,"error:",d)}),[o,e,d]),(0,s.useEffect)((()=>{!async function(){try{c(!0),console.log("Firmalar y\xfckleniyor...");const a=await fetch("/api/firmalar");if(console.log("API yan\u0131t durumu:",a.status,a.statusText),!a.ok)throw new Error("Firmalar getirilirken bir hata olu\u015ftu: ".concat(a.status," ").concat(a.statusText));const r=await a.text();console.log("API yan\u0131t metni:",r);try{const e=JSON.parse(r);console.log("\xc7\xf6z\xfcmlenmi\u015f veri:",e),e&&Array.isArray(e.firmalar)?(console.log("".concat(e.firmalar.length," firma bulundu:"),e.firmalar),t(e.firmalar),l(e.firmalar)):(console.error("Veri al\u0131nd\u0131 ama firmalar dizisi bulunamad\u0131:",e),m("API yan\u0131t\u0131nda firma verisi bulunamad\u0131"))}catch(e){throw console.error("JSON \xe7\xf6z\xfcmleme hatas\u0131:",e),m("API yan\u0131t\u0131 ge\xe7erli JSON format\u0131nda de\u011fil"),e}c(!1)}catch(a){console.error("Firma getirme hatas\u0131:",a),m("Firmalar y\xfcklenirken bir hata olu\u015ftu: ".concat(a.message)),c(!1)}}()}),[]),(0,s.useEffect)((()=>{if(""===x.trim())l(e);else{const t=x.toLowerCase(),a=e.filter((e=>e.firma_adi.toLowerCase().includes(t)||e.slug.toLowerCase().includes(t)||e.yetkili_adi&&e.yetkili_adi.toLowerCase().includes(t)||e.telefon&&e.telefon.toLowerCase().includes(t)||e.eposta&&e.eposta.toLowerCase().includes(t)));l(a),g(1)}}),[x,e]);const p=Math.ceil(a.length/50),f=a.slice(50*(u-1),50*u),w=e=>{g(e)},y=()=>{if(p<=1)return null;return(0,r.jsxs)("div",{className:"flex justify-center items-center mt-4 mb-6 space-x-1",children:[(0,r.jsx)("button",{onClick:()=>w(Math.max(1,u-1)),disabled:1===u,className:"px-3 py-1 rounded ".concat(1===u?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300"),children:"\xab \xd6nceki"}),(()=>{const e=[];e.push((0,r.jsx)("button",{onClick:()=>w(1),className:"px-3 py-1 ".concat(1===u?"bg-blue-600 text-white":"bg-gray-200"," rounded mx-1"),children:"1"},"first")),u>3&&e.push((0,r.jsx)("span",{className:"px-2",children:"..."},"left-ellipsis"));const t=Math.max(2,u-1),a=Math.min(p-1,u+1);for(let s=t;s<=a;s++)s>1&&s<p&&e.push((0,r.jsx)("button",{onClick:()=>w(s),className:"px-3 py-1 ".concat(u===s?"bg-blue-600 text-white":"bg-gray-200"," rounded mx-1"),children:s},s));return u<p-2&&e.push((0,r.jsx)("span",{className:"px-2",children:"..."},"right-ellipsis")),p>1&&e.push((0,r.jsx)("button",{onClick:()=>w(p),className:"px-3 py-1 ".concat(u===p?"bg-blue-600 text-white":"bg-gray-200"," rounded mx-1"),children:p},"last")),e})(),(0,r.jsx)("button",{onClick:()=>w(Math.min(p,u+1)),disabled:u===p,className:"px-3 py-1 rounded ".concat(u===p?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300"),children:"Sonraki \xbb"})]})};return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"bg-gray-800 text-white w-64 min-h-screen flex flex-col",children:[(0,r.jsx)("div",{className:"px-4 py-6 border-b border-gray-700",children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Y\xf6netim Paneli"})}),(0,r.jsxs)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:[(0,r.jsxs)(i.default,{href:"/admin",className:"flex items-center px-4 py-2 text-sm rounded-md text-gray-300 hover:bg-gray-700 hover:text-white",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-3",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Genel Bak\u0131\u015f"]}),(0,r.jsxs)(i.default,{href:"/admin/firmalar",className:"flex items-center px-4 py-2 text-sm rounded-md bg-gray-700 text-white",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-3",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),"Firmalar"]}),(0,r.jsxs)(i.default,{href:"/admin/firmalar/yeni",className:"flex items-center px-4 py-2 text-sm rounded-md text-gray-300 hover:bg-gray-700 hover:text-white",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-3",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Yeni Firma Ekle"]})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-700 text-sm text-gray-400",children:(0,r.jsx)("p",{children:"\xa9 2023 Sanal Kartvizit"})})]}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Firmalar"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Ho\u015f geldiniz, Admin"}),(0,r.jsx)(i.default,{href:"/login",className:"text-sm text-red-600 hover:text-red-800 hover:underline focus:outline-none",children:"\xc7\u0131k\u0131\u015f Yap"})]})]})}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Firma Listesi"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[(0,r.jsxs)("div",{className:"relative flex-grow md:max-w-xs",children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Firma ad\u0131, slug, yetkili...",className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),x&&(0,r.jsx)("button",{onClick:()=>h(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)(i.default,{href:"/admin/firmalar/yeni",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Yeni Firma Ekle"]})]})]}),o?(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Y\xfckleniyor..."})}):d?(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-500",children:d})}):0===a.length?(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-gray-500",children:x?'"'.concat(x,'" ile e\u015fle\u015fen firma bulunamad\u0131.'):"Hen\xfcz firma bulunmuyor."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Firma Ad\u0131"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Firma Yetkilisi"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefon"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"G\xf6r\xfcnt\xfclenme"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((a=>{return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.id}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.firma_adi}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Slug: ",a.slug]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.yetkili_adi||"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(()=>{try{if(a.communication_data){const e=JSON.parse(a.communication_data);if(e.telefonlar&&e.telefonlar.length>0)return e.telefonlar[0].value}return a.telefon||"-"}catch(e){return console.error("Telefon g\xf6sterilirken hata:",e),a.telefon||"-"}})()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=a.created_at,new Date(s).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.goruntulenme||0}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:()=>(e=>{const t=window.location.origin,a="".concat(t,"/").concat(e);navigator.clipboard.writeText(a).then((()=>{alert("Link kopyaland\u0131: ".concat(a))})).catch((e=>{console.error("Link kopyalan\u0131rken hata olu\u015ftu:",e)}))})(a.slug),className:"text-indigo-600 hover:text-indigo-900",title:"Linki kopyala",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})})}),(0,r.jsx)(i.default,{href:"/".concat(a.slug),target:"_blank",className:"text-blue-600 hover:text-blue-900",title:"G\xf6r\xfcnt\xfcle",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)(i.default,{href:"/admin/firmalar/".concat(a.id),className:"text-amber-600 hover:text-amber-900",title:"D\xfczenle",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),(0,r.jsx)("button",{onClick:()=>(async(a,r)=>{if(confirm('"'.concat(r,'" firmas\u0131n\u0131 silmek istedi\u011finize emin misiniz?')))try{const r=await fetch("/api/firmalar/".concat(a),{method:"DELETE"});if(!r.ok)throw new Error("Firma silinirken hata: ".concat(r.status));const s=e.filter((e=>e.id!==a));t(s),l(s.filter((e=>!x||e.firma_adi.toLowerCase().includes(x.toLowerCase())||e.slug.toLowerCase().includes(x.toLowerCase()))))}catch(s){console.error("Firma silinirken hata:",s),alert("Firma silinirken bir hata olu\u015ftu.")}})(a.id,a.firma_adi),className:"text-red-600 hover:text-red-900",title:"Sil",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]},a.id);var s}))})]})})}),(0,r.jsx)(y,{}),(0,r.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:a.length>0?(0,r.jsxs)("p",{children:["Toplam ",a.length," firma bulundu.",x&&' "'.concat(x,'" aramas\u0131yla e\u015fle\u015fen ').concat(a.length," firma g\xf6steriliyor.")," Sayfa ".concat(u,"/").concat(p)]}):null})]})]})})]})]})}},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[648,971,117,744],(function(){return t=2832,e(e.s=t);var t}));var t=e.O();_N_E=t}]);